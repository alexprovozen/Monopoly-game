var qSelect;$(function(){function e(e,t){$(".chat").append('<p class="'+t+'">'+e+"</p>")}function t(e,t,n){var r=e+1,i=".users .user"+r+" p."+t,o=".users .user"+r;"money"===t&&(n="$"+n),$(i).length?$(i).empty().html(n):($(o).append('<p class="'+t+'">'+n+"</p>"),$(o).removeClass("no-active"))}function n(){var e=.5+6*Math.random(),t=.5+6*Math.random();return e=Math.round(e),t=Math.round(t),{number1:e,number2:t}}function r(){function t(e,t){return t.randomSum-e.randomSum}for(var r=0;r<s.players.length;r++){var i=n();if(s.players[r].randomSum=i.number1+i.number2,e("Игрок <b>"+s.players[r].name+"</b> выбрасывает "+i.number1+" и "+i.number2,"info"),r>0)for(var o=0;o<r;o++)if(s.players[r].randomSum===s.players[o].randomSum){var i=n();s.players[r].randomSum=i.number1+i.number2,e("Игрок <b>"+s.players[r].name+"</b> перебрасывает "+i.number1+" и "+i.number2,"info")}}s.players.sort(t);for(var r=0;r<s.players.length;r++){e(["Первым","Вторым","Третьим","Четвертым","Пятым"][r]+" ходит <b>"+s.players[r].name+"</b>","trade")}}function i(e){var t=$(".monitor .timeOut");t.show();var n=setInterval(function(){e--,t.empty().html(e),0===e&&clearInterval(n)},1e3)}function o(){if($(".names input").each(function(){this.value?$(this).removeClass("error"):$(this).addClass("error")}),!$(".names input.error").length){$(".names input").each(function(){var e=$(this).attr("id"),t=+e.replace(/\D+/g,"")-1;s.players[t]={id:e,name:this.value,money:1e6,counter:0}}),$(".start-message").fadeOut(200);for(var n=0;n<s.players.length;n++){t(n,"name",s.players[n].name),t(n,"money",s.players[n].money);var i=n+1,o=".checks .user"+i;$(o).show()}e("Игра началась","info"),e("Определяем очередь игроков","info"),r(),a()}}function a(){for(var t=0,n=0;n<s.players.length;n++){var r=n;!function(){var n=r;setTimeout(function(){i(10),e("Ход игрока <b>"+s.players[n].name+"</b>","info")},t)}(),t+=1e4}}var s={players:[]};$("#start-game").on("click",o),$("#quantity-players").on("change",function(){var e=$(".names input").length;if(qSelect=this.value,e!==qSelect){$(".names").empty();for(var t=0;t<qSelect;t++){var n=t+1;$(".names").append('<label for="player-'+n+'">Игрок '+n+' </label><input type="text" id="player-'+n+'"><br>')}}})});