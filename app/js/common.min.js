var qSelect;$(function(){function e(e,r){$(".chat").append('<p class="'+r+'">'+e+"</p>")}function r(e,r,a){var n=e+1,t=".users .user"+n+" p."+r,s=".users .user"+n;"money"===r&&(a="$"+a),$(t).length?$(t).empty().html(a):($(s).append('<p class="'+r+'">'+a+"</p>"),$(s).removeClass("no-active"))}function a(){var e=.5+6*Math.random(),r=.5+6*Math.random();return e=Math.round(e),r=Math.round(r),{number1:e,number2:r}}function n(){function r(e,r){return r.randomSum-e.randomSum}for(var n=0;n<m.players.length;n++){var t=a();if(m.players[n].randomSum=t.number1+t.number2,e("Игрок <b>"+m.players[n].name+"</b> выбрасывает "+t.number1+" и "+t.number2,"info"),n>0)for(var s=0;s<n;s++)if(m.players[n].randomSum===m.players[s].randomSum){var t=a();m.players[n].randomSum=t.number1+t.number2,e("Игрок <b>"+m.players[n].name+"</b> перебрасывает "+t.number1+" и "+t.number2,"info")}}m.players.sort(r);for(var n=0;n<m.players.length;n++){e(["Первым","Вторым","Третьим","Четвертым","Пятым"][n]+" ходит <b>"+m.players[n].name+"</b>","trade")}}function t(e){var r=$(".monitor .timeOut");r.show();var a=setInterval(function(){e--,r.empty().html(e),0===e&&clearInterval(a)},1e3)}function s(){if($(".names input").each(function(){this.value?$(this).removeClass("error"):$(this).addClass("error")}),!$(".names input.error").length){$(".names input").each(function(){var e=$(this).attr("id"),r=+e.replace(/\D+/g,"")-1;m.players[r]={id:e,name:this.value,money:1e6,counter:0}}),$(".start-message").fadeOut(200);for(var a=0;a<m.players.length;a++){r(a,"name",m.players[a].name),r(a,"money",m.players[a].money);var t=a+1,s=".checks .user"+t;$(s).show()}e("Игра началась","info"),e("Определяем очередь игроков","info"),n(),o()}}function o(){for(var r=0;r<m.players.length;r++)e("Ход игрока <b>"+m.players[r].name+"</b>","info"),t(10)}var m={players:[]};$("#start-game").on("click",s),$("#quantity-players").on("change",function(){var e=$(".names input").length;if(qSelect=this.value,e!==qSelect){$(".names").empty();for(var r=0;r<qSelect;r++){var a=r+1;$(".names").append('<label for="player-'+a+'">Игрок '+a+' </label><input type="text" id="player-'+a+'"><br>')}}})});